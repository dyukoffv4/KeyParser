# Light KeyParser - Тестовая облегченная версия фрейсворка KeyParser

## **Содержание**

    1. Общие сведения
    2. Использование
      2.1 Сборка и подключение динамической библиотеки
      2.2 Использование и функционал фреймворка
    3. Тестирование

---
## **1. Общие сведения**
Фреймворк *LightKeyParser* позволяет настроить пользователю критерии для парсинга аргументов программы.

Данный тестовый вариант не иммеет функционала для подключения функций - обработчиков для настроенных ключей.
На данный момент он способен, проанализировать входящие аргументы и организовать их в структуру, где будет указан ключ, его аргументы, а также порядок вызова ключей.

На данный момент проект собирается исключительно в пакеты для Linux OS.

---
## **2. Использование**

### **2.1. Сборка и подключение динамической библиотеки**

Для работы с содержимым проекта был создан bash-скрипт `controller`.
Для сборки `.deb` пакета следует запустить скрипт с командой `build`. Созданный пакет будет находится в директории "out".
Для удаления бинарных файлов и промежуточных файлов следует запустить скрипт с командой `clean`.

    KeyParser$ bash controller build
    KeyParser$ bash controller clean

### **2.2. Использование и функционал фреймворка**
Для использования элементов *KeyParser* нужно подключить заголовочный файл `parser.hpp`:

    #include <lkeyparser/parser.hpp>

Все элементы Фреймворка расположены в пространстве имен `keyparser`. Используется класс `Parser` и `Key`. На выход предоставляется объект класса `Tasks`.

**`Key`** - класс, который хранит информацию о ключе и имеет необходимый функционал для его использовании в `Parser`. Ниже представлен список методов:

**Конструкторы:**
* *explicit Key(const char& s_data)* - Конструктор для задания ключа с коротким именем.
* *explicit Key(const std::string& l_data)* - Конструктор для задания ключа с длинным именем.
* *explicit Key(const char& s_data, const std::string& l_data)* - Конструктор для задания ключа с полным именем.

**Методы:**
* *bool operator<(const Key& key) const* - Оператор сравнения ключей (Используется в `std::map`).
* *bool operator==(const Key& key) const* - Оператор равенства ключей  (Используется в `std::map`).

* *bool full() const* - Метод для проверки ключа на полное имя.

* *char sname() const* - Метод для получения короткого имени ключа.
* *std::string lname() const* - Метод для получения длинного имени ключа.
* *std::string fname() const* - Метод для получения полного имени ключа.

**`Parser`** - класс, который занимается разбором поступающих параметров и их обработкой в соответствии с настройкой соответствующих ключей. Ниже представлен список методов:

**Конструкторы:**
* *Parser(int f_num = -1)* - Стандартный конструктор. Можно задать диапазон чисел для корневого ключа. Механизм задания диапазона указан ниже.
* *Parser(int f_num, int s_num)* - Конструктор для залания полного диапазона числа аргументов для корневого ключа. Механизм задания диапазона указан ниже.

**Методы:**
* *Parser& operator=(const Parser& term)* - Оператор присваивания Парсера. 

* *void addKey(const Key& data, int f_num, int s_num, Parser\* parser = nullptr)* - Метод для добавления ключа с указанием полного диапазона.
* *void addKey(const Key& data, int f_num, Parser\* parser = nullptr)* - Метод для добавления ключа с простым указанием диапзона.
* *void addKey(const Key& data, Parser\* parser = nullptr)* - Метод для добавления ключа.

* *void delKey(const Key& data)* - Метод для удаления указанного ключа.

* *void setKeyParser(const Key& key, Parser\* parser)* - Метод для установке парсера для ключа.
* *void setKeyArgnum(const Key& key, int f_num, int s_num)* - Метод для установки полного диапазона для ключа.
* *void setKeyArgnum(const Key& key, int f_num)* - Метод для установки простого диапазона для ключа.

* *void setArgnum(int f_num, int s_num)* - Метод для установки полного диапазона для корневого ключа.
* *void setArgnum(int f_num)* - Метод для установки простого диапазона для корневого ключа.

* *void parse(int argc, char\* argv[])* - Метод для обработки переданных параметров и исполнения функций-обработчиков над ними. Принимает на вход аргументы функции `main`. Игнорирует первый параметр (имя исполняемого файла).
* *void parse(Args input)* - Метод для обработки переданных параметров и исполнения функций-обработчиков над ними. Принимает на вход вектор параметров (строк).

*\*Указание диапазона. По умолчанию берутся все возможные аргументы. Установка параметра "-1" означает отсутствие границы диапазона слева или справа, в зависимости от номера параметра. При указании только первого параметра, диапазон будет взят как от данного параметра до него же.*

---
## **3. Тестирование**

Тестовые функции располагаются в директории "test/src". Для их сборки предусмотрен Makefile. Пример сборки и запуска тестов:

    KeyParser$ make -C test/
    KeyParser$ test/out/libtest

Тесты для исполнения записываются в файл "test/src/main.cpp", в функцию `main()`. При необходимости можно отредактировать файл "test/src/main.cpp", добавить новые тестовые файлы и добавить зависимости в Makefile.
